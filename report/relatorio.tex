%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Modelo de relatório de Disciplina de MLP a partir da
% classe latex iiufrgs disponivel em http://github.com/schnorr/iiufrgs
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definição do tipo / classe de documento e estilo usado
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\documentclass[rel_mlp]{iiufrgs}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Importação de pacotes
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% (a A seguir podem ser importados os pacotes necessários para o documento, de acordo
% com a necessidade)
%
\usepackage[brazilian]{babel}	    % para texto escrito em pt-br
\usepackage[utf8]{inputenc}         % pacote para acentuação
\usepackage{graphicx}         	    % pacote para importar figuras
\usepackage[T1]{fontenc}            % pacote para conj. de caracteres correto
\usepackage{times}                  % pacote para usar fonte Adobe Times
\usepackage{enumerate}              % para lista de itens com letras
\usepackage{breakcites}
\usepackage{titlesec}
\usepackage{enumitem}
\usepackage{titletoc}
\usepackage{listings}			    % para listagens de código-fonte
\usepackage{mathptmx}               % p/ usar fonte Adobe Times nas formulas matematicas
\usepackage{url}                    % para formatar URLs
%\usepackage{color}				    % para imagens e outras coisas coloridas
%\usepackage{fixltx2e}              % para subscript
%\usepackage{amsmath}               % para \epsilon e matemática
%\usepackage{amsfonts}
%\usepackage{setspace}			    % para mudar espaçamento dos parágrafos
%\usepackage[table,xcdraw]{xcolor}  % para tabelas coloridas
%\usepackage{longtable}             % para tabelas compridas (mais de uma página)
%\usepackage{float}
%\usepackage{booktabs}
%\usepackage{tabularx}
%\usepackage[breaklinks]{hyperref}

\usepackage[alf,abnt-emphasize=bf]{abntex2cite}	% pacote para usar citações abnt

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Sintaxe
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%

%Define the listing package
\usepackage{color} %use color
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}

%Customize a bit the look
\lstset{ %
backgroundcolor=\color{white}, % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
basicstyle=\footnotesize, % the size of the fonts that are used for the code
breakatwhitespace=false, % sets if automatic breaks should only happen at whitespace
breaklines=true, % sets automatic line breaking
captionpos=b, % sets the caption-position to bottom
commentstyle=\color{mygreen}, % comment style
deletekeywords={...}, % if you want to delete keywords from the given language
escapeinside={\%*}{*)}, % if you want to add LaTeX within your code
extendedchars=true, % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
frame=single, % adds a frame around the code
keepspaces=true, % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
keywordstyle=\color{blue}, % keyword style
% language=Octave, % the language of the code
morekeywords={*,...}, % if you want to add more keywords to the set
numbers=left, % where to put the line-numbers; possible values are (none, left, right)
numbersep=5pt, % how far the line-numbers are from the code
numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
rulecolor=\color{black}, % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
showspaces=false, % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
showstringspaces=false, % underline spaces within strings only
showtabs=false, % show tabs within strings adding particular underscores
stepnumber=1, % the step between two line-numbers. If it's 1, each line will be numbered
stringstyle=\color{mymauve}, % string literal style
tabsize=2, % sets default tabsize to 2 spaces
title=\lstname % show the filename of files included with \lstinputlisting; also try caption instead of title
}
%END of listing package%

\definecolor{darkgray}{rgb}{.4,.4,.4}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}

%define Javascript language
\lstdefinelanguage{JavaScript}{
keywords={npm, break, case, catch, class, const, continue, debugger, default, delete, do, else, enum, export, extends, false, finally, for, function, if, import, in, instanceof, new, null, return, super, switch, this, throw, true, try, typeof, var, void, while, with},
keywordstyle=\color{purple}\bfseries,
ndkeywords={run, as, implements, interface, let, package, private, protected, public, static, yield, symbol, from, of, any, boolean, constructor, declare, get, module, require, number, set, string, T, R, object, Countries, number, ViewMode, Color, InteractionState, CountrySelection, ContinentInfo},
ndkeywordstyle=\color{YellowGreen}\bfseries,
identifierstyle=\color{MidnightBlue},
sensitive=true,
comment=[l]{//},
morecomment=[s]{/*}{*/},
commentstyle=\color{gray}\ttfamily,
stringstyle=\color{red}\ttfamily,
morestring=[b]',
morestring=[b]"
}

\lstset{
language=JavaScript,
extendedchars=true,
basicstyle=\footnotesize\ttfamily,
showstringspaces=false,
showspaces=false,
numbers=left,
numberstyle=\footnotesize,
numbersep=9pt,
tabsize=2,
breaklines=true,
showtabs=false,
captionpos=b,
classoffset=1, % starting new class
otherkeywords={>,<,.,;,-,!,=,~,:,[,],?,\%},
morekeywords={>,<,.,;,-,!,=,~,:,[,],?,\%},
keywordstyle=\color{darkgray},
classoffset=0,
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Macros, ajustes e definições
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%

% define estilo de parágrafo para citação longa direta:
\newenvironment{citacao}{
    %\singlespacing
    %\footnotesize
    \small
    \begin{list}{}{
        \setlength{\leftmargin}{4.0cm}
        \setstretch{1}
        \setlength{\topsep}{1.2cm}
        \setlength{\listparindent}{\parindent}
    }
    \item[]}{\end{list}
}

% adiciona a fonte em figuras e tabelas
\newcommand{\fonte}[1]{\\Fonte: {#1}}

% Ative o seguinte caso alguma nota de rodapé fique muito longa e quebre entre múltiplas
% páginas
%\interfootnotelinepenalty=10000

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Informações gerais
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% título
\title{Implementação do jogo War sando TypeScript}

% autor
\author{DELTA}{GRUPO} % {sobrenome}{nome}
\author{da Rocha Costa e Silva}{Átila} % {sobrenome}{nome}
\author{Bechlin}{Béuren Felipe}
\author{Bertoldo Colombo de Souza}{Felipe}
%\author{Autor2}{Aluno} % {sobrenome}{nome} 1 para cada aluno

% Professor orientador da disciplina
\advisor[Prof.~Dr.]{Mello Schnorr}{Lucas}

% Nome do(s) curso(s):
\course{Curso de Graduação em Ciência da Computa{\c{c}}{\~a}o e Engenharia de Computação}

% local da realização do trabalho
\location{Porto Alegre}{RS}

% data da entrega do trabalho (mês e ano)
\date{07}{2018}


% Palavras chave
\keyword{War}
\keyword{TypeScript}
%\keyword{}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Início do documento e elementos pré-textuais
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Declara início do documento
\begin{document}

% inclui folha de rosto
\maketitle

\selectlanguage{brazilian}

% Sumario
\tableofcontents



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Aqui comeca o texto propriamente dito
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%espaçamento entre parágrafos
%\setlength{\parskip}{6 pt}

\selectlanguage{brazilian}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Introdução
%
\chapter{Introdução} \label{intro}
O trabalho visa a solução de um problema através de diferentes paradigmas de programação: orientação a objetos e funcional. \par
Com as duas implementações, teremos visto na prática as vantagens e desvantagens de cada paradigma na abordagem ao problema, tendo condições de estabelecer um comparativo entre diferentes pontos. \par
O problema escolhido foi o jogo War, versão brasileira do norte americano Risk, que será abordado a seguir.


\section{Visão geral da linguagem}
Dentro das linguagens disponibilizadas, TypeScript é a que possui maior suporte para elementos de interfaces e bibliotecas em geral, já que é um superset de JavaScript que, através do TypeScript Transpiler, é  transformada para JavaScript.
Outro fator determinante é a necessidade de solucionar o problema também de uma forma funcional, e JavaScript é uma linguagem essencialmente funcional com vasta utilização de closures e padrões de projeto, como módulo. \par
Mesmo TypeScript sendo implementada para restringir o uso de JavaScript, além de adicionar tipagem estática e outros elementos de OOP, é possível utilizar esses padrões herdados da linguagem JavaScript, ajudando bastante em uma solução funcional.
Como já citado, o TypeScript foi desenvolvido com o intuito de criar uma linguagem mais estável para aplicações web e com melhor manutenibilidade que o JS. Adicionando elementos de checagem estática de tipos, diferentemente do JS, orientação a objetos com maior poder que as especificações de EcmaScript 6. \par
Dessa maneira, possuímos uma linguagem completa para solucionar um problema com grande interação com usuário e elementos gráficos como é um caso de um jogo.
Para exemplificar, é possível utilizar o framework de single page applications criado pelo Google chamado Angular, usado por grandes empresas. Também é possível utilizar uma biblioteca interface com usuário chamada React, desenvolvida e mantida pelo Facebook usada por Netflix, AirBnb e outros. \par
Para auxílio da programação funcional existe a implementação da biblioteca underscore para TypeScript.
Além disso a linguagem possui um ótimo ambiente de desenvolvimento com vários utilitários desenvolvidos por terceiros para gerenciamento de pacotes e dependências, gerenciadores de tarefas e frameworks para testes.


\section{Descrição do problema}
Em TypeScript será implementado o jogo War, versão brasileira do norteamericano Risk. \par
No jogo, o participante controla um exército que recebe um objetivo que deverá ser cumprido.
O objetivo é conquistar determinado território. Se, ao final de uma batalha, o participante destruir todos os exércitos de defesa do adversário, ele terá conquistado o território.
Quando um objetivo é declarado como concluído, o participante que o declarou conquista o território de combate e recebe novos exércitos, aumentando seu poder. \par
Em cada rodada, o participante poderá receber novos exércitos, caso conquiste territórios, usá-los conforme sua estratégia, atacar outros exércitos ou mover exércitos. \par
Vence o participante que atingir o objetivo recebido no início do jogo.

\chapter{Desenvolvimento}


\section{Dependências}
A única dependência que deve estar instalada no host para o processo de build do projeto é o \textbf{NodeJS}.
O NodeJS é uma versão da V8, engine de JavaScript desenvolvida pelo Google para pré-compilação e execução de
JavaScript em seu navegador Google Chrome, portada para plataforma. \par
Um dos pontos importantes dessa engine de JavaScript é que ela é totalmente single thread, mas usa um modelo de eventos e I/O não bloqueante para lidar com essa limitação. Esse modelo tem se mostrado uma alternativa aos tradicionais com multi threads, tanto que o NodeJS vem sendo vastamente usado como servidor aplicação para aplicações web. \par
Juntamente com o NodeJS, é instalado o gerenciador de pacotes \textbf{NPM}, que possui o maior ecosistema de bibliotecas open source do mundo.
Essas dependências são instaladas localmente dentro de uma pasta na mesma raiz do projeto, independente da plataforma e sem nenhuma ligação com sistema operacional do usuário. Isso aumenta a portabilidade do projeto e automatiza o processo de construção da aplicação, já que com um comando é baixado e instalado todas as dependências listadas no projeto.

\subsection{Instalando a aplicação}
Como citado anteriormente o projeto usa o \textbf{NodeJS} e \textbf{NPM}. No primeiro momento é necessário instalar as dependências externas do projeto, como até mesmo o \textbf{Typescript}, \textbf{Babel transpiler}, \textbf{Redux}, \textbf{React} e outros. \par
Para realizar a instalação, execute via terminal o seguinte comando no diretório raíz do projeto:

\begin{lstlisting}[language=JavaScript]
  npm install
\end{lstlisting}

Esse comando chama o gerenciador de pacotes \textbf{NPM} solicitando a instalação dos pacotes que estão listados no arquivo \verb|PACKAGE.json|. Após instaladas as dependências, é necessário "compilar" o projeto, nas próximas sessões será descrito como ocorre esse processo. \par
Para iniciar o ambiente de desenvolvimento é necessário executar o seguinte comando:

\begin{lstlisting}[language=JavaScript]
  npm run start
\end{lstlisting}

Esse comando chama o script start também descrito no arquivo \verb|PACKAGE.json|. Como resultado, ele compila o projeto, abre o navegador padrão do host (apontando para o localhost porta 3000), e já sobe um servidor de aplicação node que serve o conteúdo estático ligado com todas as interfaces de rede do Host na porta 3000. Além disso, é adicionado um watcher na pasta, com Inotify em linux distros, para recompilar o projeto em casos de modificações e automaticamente recarregar a página do navegador.

\subsection{React}
React é a biblioteca usada para a interface gráfica, tendo influência na construção da aplicação. Criada pelo Facebook, visa solucionar um problema antigo relacionado à construção e manipulação da DOM e a lógica de negócios da aplicação. Com a evolução da computação em geral e também dos requisitos dos usuários, as páginas Web passaram de simples páginas com hiperlinks para aplicações completas e, com isso, o browser passa a ser usado como um ambiente de execução dessas aplicações. \par
A biblioteca tem uma construção como teor funcional, no qual cada componente tem entradas via propriedades e retorna elementos HTML através de JSX. Os componentes podem montar outros componentes em sua visualização e definir suas entradas. É possível, também, armazenar estados dentro de componentes por meio de classes. Para isso, estende-se uma classe de componente do React, que possui alguns métodos adicionais que lidam com o estado e também com o ciclo de vida do componente.

\subsection{Redux}
O conjunto React+Redux é uma combinação comum para aplicações React. Usar o estado do componente para salvar dados e estado geral da aplicação não é muito escalável, já que se torna necessário ter componentes com muito filhos e muitas propriedades de entrada para componentes intermediários. Então, a combinação do React com um gerenciador de estado mais completo é quase que natural. \par
O Redux é um gerenciador e mantenedor de estado para aplicações JavaScript em geral. Seu principal conceito está em guardar o estado de forma imutável e sempre que seja necessário modificar o estado gerar um novo objeto. Essa decisão é muito importante, pois em geral todas as comparações realizadas em JavaScript são da forma shallow, e assim gerando um novo objeto é fácil compreender quando houve alguma alteração. Pela forma que a linguagem JavaScript foi concebida, usando cadeia de protótipos, uma operação de comparação deep é bem mais custosa já que é necessário percorrer toda a árvore de protótipos existentes em um objeto. \par
Para guardar esse objeto que contém os dados de estado é introduzido um conceito chamado \textbf{store} que possui duas interfaces principais: uma para pegar o estado e outra para disparar ações. As ações são objetos que contêm basicamente o tipo da ação que está disparando uma carga útil, que é usado como parâmetro para atualizar o estado. Essa é a única maneira de sinalizar uma alteração de estado. \par
A real alteração do estado é realizada dentro de \textbf{redutores}, que são basicamente funções que detalham o que cada ação deve gerar como resultado. Em geral, são criados com switchs com a variável seletora no tipo da ação e devem retornar um novo objeto que será substituído para representar o novo estado.\par
A real utilidade Redux no caso do React é uma função de alta ordem disponível na pacote react-redux, onde é possível conectar os componentes React com a store. Nessa conexão com os componentes são injetados alguns atributos disponíveis na store como propriedades do componente React, através de uma função de mapeamento entre o estado e as propriedades. Essa função de mapeamento deve ser uma função pura, podendo ser realizado algumas manipulações antes de retornar as propriedades.

\section{TypeScript vs. JavaScript}
Ao pé da letra JavaScript não é uma linguagem, mas sim uma definição feita pela ECMA foundation para servir como um contrato entre os navegadores e desenvolvedores de aplicações web sobre o que está disponível na sua engine de script. Isso nem sempre é totalmente cumprido e, com o processo de evolução da linguagem, vários navagores não implementam a especificação por completo. \par
Esses problemas acabaram levando a soluções alternativas pela comunidade, como implementar as funcionalidadesnovas da linguagem usando elementos disponíveis no momento. Essa metodologia ficou conhecida como polyfill. Isso também foi evoluindo, criando um conjunto grandes de polyfills e então se começou a realizar o processo de transpilação, onde o código fonte JavaScript é transformado novamente em JavaScript, usando as funcionalidades das especificações antigas. \par
O TypeScript, criado pela Microsoft, usa esses artifícios para gerar JavaScript, executado em grande parte dos navagadores web. Esse caso é diferente, uma vez que trata-se de uma linguagem sendo transformada em outra, mas muitas os dois processos são realizados serialmente com TSCompiler, que transforma em ES6(EcmaScript v6) e depois em ES5(EcmaScript v5), melhor suportada pela maioria dos navegadores. \par
Entretanto, a própria referência do TypeScript se intitula como um superset de JavaScript adicionando, principalmente, a tipagem estática, o que não a torna disruptiva em relação ao JavaScript.\par
Outro ponto interessante nesse contexto é a possibilidade de usar grande parte das bibliotecas disponíveis para JavaScript realizando uma interface para compatibilidade com a tipagem do TypeScript, que muitas vezes pode ser feita pelo próprio usuário da biblioteca, já que o TScompiler também compila código JavaScript. Isso pode ser visto no arquivo \verb|package.json| onde são adicionados os módulos \verb|@types| para baixar os pacotes que contém essas interfaces e namespaces.

\begin{lstlisting}[language=JavaScript]
{
 "name": "war-game",
 "version": "0.1.0",
 "private": true,
 "homepage": "http://bfbechlin.github.io/war-game",
 "dependencies": {
   "bootstrap": "^4.1.0",
   "classnames": "^2.2.5",
   "history": "^4.7.2",
   "material-ui": "^0.20.0",
   "react": "^16.3.1",
   "react-dom": "^16.3.1",
   "react-redux": "^5.0.7",
   "react-router-redux": "^4.0.8",
   "react-scripts-ts": "2.14.0",
   "react-swipeable-views": "^0.12.13",
   "react-transition-group": "^1.2.1",
   "redux": "^3.7.2",
   "redux-devtools-extension": "^2.13.2",
   "svg-path-parser": "^1.1.0",
   "underscore": "^1.9.0",
   "uuid": "^3.2.1"
 },
 "scripts": {
   "start": "react-scripts-ts start",
   "build": "react-scripts-ts build",
   "test": "react-scripts-ts test --env=jsdom",
   "eject": "react-scripts-ts eject",
   "predeploy": "npm run build",
   "deploy": "gh-pages -d build",
   "report": "pdflatex -no-file-line-error report/relatorio.tex"
 },
 "devDependencies": {
   "@types/classnames": "^2.2.3",
   "@types/jest": "^22.2.2",
   "@types/node": "^9.6.2",
   "@types/react": "^16.3.10",
   "@types/react-dom": "^16.0.5",
   "@types/react-redux": "^5.0.16",
   "@types/react-router-redux": "^5.0.13",
   "@types/material-ui": "^0.21.1",
   "@types/react-swipeable-views": "^0.12.1",
   "@types/react-transition-group": "^1.1.3",
   "@types/underscore": "^1.8.8",
   "@types/uuid": "^3.4.3",
   "gh-pages": "^1.1.0",
   "typescript": "^2.8.1"
 }
}
\end{lstlisting}

Esse processo é usado por outras linguagens além do TypeScript, como ClojureScript, CoffeeScript e outros.

\section{Estrutura do projeto}
Na pasta \verb|src| se encontra todo o fonte do projeto com a seguinte hierarquia de pastas:
\begin{itemize}
  \item \textbf{Components}: componentes React. Separado por componentes chaves, mas que possuem outros componentes relacionados/dependentes.
  \item \textbf{Core}: lógica de negócio em geral. Com as seguintes subpastas:
    \begin{itemize}
      \item \textbf{Transducers}: funções puras, como mapeamento de estado para propriedades, levantamento de possíveis países para atacar.
      \item \textbf{Transitions}: funções que precisam ler o estado da aplicação para operar.
    \end{itemize}
  \item \textbf{Hocs}: componetes de alta ordem React.
  \item \textbf{Store}: gerenciador de estado Redux. Separado por grupo de funcionalidades, contendo o seu redutor e suas ações.
  \item \textbf{Utils}: utilidades em geral, como funções de alta ordem para manipulação de listas e objetos, cores e etc.
\end{itemize}

\par Existem arquivos soltos dentro da pasta \verb|src| que são os arquivos de ponto de entrada para a criação da aplicação.



\section{Paradigma funcional}

\subsection{Conceitos explorados nas funções}
\subsubsection{utils/array}

\begin{lstlisting}[language = JavaScript]

export const intersection = <T>(array1: T[], array2: T[]) => (
 array1.filter((element: T) => array2.indexOf(element) > -1)
);
\end{lstlisting}
\begin{lstlisting}[language = JavaScript]
export const difference = <T>(array1: T[], array2: T[]) => (
 array1.filter((element: T) => array2.indexOf(element) < 0)
);
\end{lstlisting}
\begin{lstlisting}[language = JavaScript]
export const cyclicIncrement = <T>(array: T[], element: T) => (
 array[(array.indexOf(element) + 1) % array.length]
);
\end{lstlisting}
\begin{lstlisting}[language = JavaScript]
export const shuffle = <T>(array: T[]): T[] => {
 if (array.length === 0) {
   return [];
 }
 const index = Math.trunc(Math.random() * array.length);
 const element = array.splice(index, 1);
 return [element[0], ...shuffle(array)];
};
\end{lstlisting}
\begin{lstlisting}[language = JavaScript]
export const partition = <T>(array: T[], n: number): T[][] => {
 const result = groupBy(array, (item: T, index: number) => (
   index % n
 ));
 return values(result);
};
\end{lstlisting}

\subsubsection{utils/object}

\begin{lstlisting}[language=JavaScript]

export const filter = <T>(obj: object, callback: ((value: T, key?: string) => boolean)): string[] => {
const props = [];
for (const prop in obj) {
 if (obj.hasOwnProperty(prop)) {
   if (callback(obj[prop], prop)) {
     props.push(prop);
   }
 }
}
return props;
};
\end{lstlisting}
\begin{lstlisting}[language = JavaScript]
export const map = <T, R>(obj: object, callback: ((property: T, key?: string) => R)): R[] => {
const result: R[] = [];
for (const prop in obj) {
 if (obj.hasOwnProperty(prop)) {
   result.push(callback(obj[prop], prop));
 }
}
return result;
};
\end{lstlisting}
\begin{lstlisting}[language = JavaScript]
export const lenght = (obj: object): number => {
let n: number = 0;
for (const prop in obj) {
 if (obj.hasOwnProperty(prop)) {
   n += 1;
 }
}
return n;
};
\end{lstlisting}
\begin{lstlisting}[language = JavaScript]
export const toArray = <T>(obj: object): T[] => {
const result: T[] = [];
for (const prop in obj) {
 if (obj.hasOwnProperty(prop)) {
   result.push(obj[prop]);
 }
}
return result;
};

\end{lstlisting}

\subsubsection{core/transducers/map}
\begin{lstlisting}[language=JavaScript]

export const playerCountries = (player: string, countries: CountryState, minTroops: number = 0) => (
filter(countries, (country: CountryInfo) => ( country.owner === player && country.troops > minTroops))
);
\end{lstlisting}
\begin{lstlisting}[language = JavaScript]
export const borderCountries = (country: Countries, countries: CountryState, player: string, sameOrigin: boolean = true) => {
const borders = bdCountries[country] ? bdCountries[country] : [];
return sameOrigin ?
 intersection(borders, playerCountries(player, countries)) :
 difference(borders, playerCountries(player, countries)) ;
};

\end{lstlisting}

\subsubsection{core/transictions/gameTransictions}
\begin{lstlisting}[language=JavaScript]
export const computeNewTroops = (player: string, country: CountryState) => {
const countries = playerCountries(player, country);
let newTroopsCounter = Math.ceil(countries.length / 2);
const continentBonus = map <ContinentInfo, number> (continentsInfo, (continent: ContinentInfo) => (
 difference(continent.countries, countries).length === 0 ? continent.troopsBonus : 0
));
newTroopsCounter += continentBonus.reduce((acc, value) => (acc + value), 0);
return newTroopsCounter;
};
\end{lstlisting}
\begin{lstlisting}[language = JavaScript]

export const gameInit = (players: PlayerState) => {
each(
 object(keys(players), partition(shuffle(allCountries), lenght(players))) as InitCountries,
 (countriesNames: Countries[], playerName: string) => {
   store.dispatch(massChangeOwner(countriesNames, playerName));
 }
);
};
\end{lstlisting}
\begin{lstlisting}[language = JavaScript]
export const endGameVerify = () => {
// Verify each player objective. For now only if a player has all countries
const { country } = store.getState();
const randomPlayer = country.Brazil.owner;
return filter(country, (countryInfo: CountryInfo) => (countryInfo.owner !== randomPlayer)) === [];
};


\end{lstlisting}

\section{Paradigma de orientação a objetos}

\chapter{Resultados}

\chapter{Conclusão}

\bibliographystyle{abntex2-alf}

\begin{thebibliography}{9}
\bibitem{TypeScriptReference}
The TypeScript Reference,
\\\texttt{https://www.typescriptlang.org/docs/home.html}

\bibitem{ReactJSReference}
The ReactJS Reference,
\\\texttt{https://reactjs.org/docs/react-api.html}


\bibitem{ReduxWithReact}
Using Redux with React,
\\\texttt{https://redux.js.org/basics/usage-with-react}

\bibitem{UnderscoreJS}
Underscore JS,
\\\texttt{http://underscorejs.org/}

\bibitem{ReactReduxGuide}
React and Redux TypeScript Guide,
\\\texttt{https://github.com/piotrwitek/react-redux-typescript-guide}

\end{thebibliography}


\end{document}
